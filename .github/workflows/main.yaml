name: "Main branch testing"

on:
  push:
    branches:
      - main

jobs:
#  Analyze:
#    uses: iperon-net/messenger/.github/workflows/_analyze.yaml@main
#
#  Testing:
#    needs: [Analyze]
#    uses: iperon-net/messenger/.github/workflows/_testing.yaml@main

  bump_version:
    name: "Bump version"
    runs-on: macos-15
    timeout-minutes: 5
#    needs: [Testing]
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: stable
          cache: true

      - name: install cider
        run: dart pub global activate cider

      - name: Main
        run: |
          ls

      - name: bump version
        run: cider bump build --bump-build
